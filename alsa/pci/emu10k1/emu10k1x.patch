--- ../../alsa-kernel/pci/emu10k1/emu10k1x.c	2014-02-28 11:55:49.003258913 +0100
+++ emu10k1x.c	2014-02-28 12:05:19.777691178 +0100
@@ -1,3 +1,4 @@
+#include "adriver.h"
 /*
  *  Copyright (c) by Francisco Moraes <fmoraes@nc.rr.com>
  *  Driver EMU10K1X chips
@@ -967,7 +968,7 @@
 
 	pci_set_master(pci);
 	/* read revision & serial */
-	chip->revision = pci->revision;
+	chip->revision = snd_pci_revision(pci);
 	pci_read_config_dword(pci, PCI_SUBSYSTEM_VENDOR_ID, &chip->serial);
 	pci_read_config_word(pci, PCI_SUBSYSTEM_ID, &chip->model);
 	dev_info(card->dev, "Model %04x Rev %08x Serial %08x\n", chip->model,
@@ -1649,3 +1650,5 @@
 };
 
 module_pci_driver(emu10k1x_driver);
+
+EXPORT_NO_SYMBOLS;
