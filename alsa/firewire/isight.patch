--- ../alsa-kernel/firewire/isight.c	2013-07-15 12:14:30.252860918 +0200
+++ isight.c	2013-07-15 16:50:10.007577473 +0200
@@ -1,3 +1,10 @@
+#include "adriver.h"
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 39)
+#include "iso-resources-old.h"
+#endif
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 39)
+#define fw_iso_context_queue_flush(x)
+#endif
 /*
  * Apple iSight audio driver
  *
@@ -725,15 +732,34 @@
 };
 MODULE_DEVICE_TABLE(ieee1394, isight_id_table);
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 11, 0)
+static int __isight_probe(struct device *dev)
+{
+	return isight_probe(fw_unit(dev), NULL);
+}
+
+static int __isight_remove(struct device *dev)
+{
+	isight_remove(fw_unit(dev));
+	return 0;
+}
+#endif
+
 static struct fw_driver isight_driver = {
 	.driver   = {
 		.owner	= THIS_MODULE,
 		.name	= KBUILD_MODNAME,
 		.bus	= &fw_bus_type,
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 11, 0)
+		.probe    = __isight_probe,
+		.remove   = __isight_remove,
+#endif
 	},
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 11, 0)
 	.probe    = isight_probe,
-	.update   = isight_bus_reset,
 	.remove   = isight_remove,
+#endif
+	.update   = isight_bus_reset,
 	.id_table = isight_id_table,
 };
 
