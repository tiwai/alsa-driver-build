--- ../alsa-kernel/firewire/dice.c	2013-10-22 10:03:16.835007244 +0200
+++ dice.c	2013-10-30 07:28:46.132508934 +0100
@@ -1,3 +1,7 @@
+#include "adriver.h"
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2, 6, 39)
+#include "iso-resources-old.h"
+#endif
 /*
  * TC Applied Technologies Digital Interface Communications Engine driver
  *
@@ -1468,15 +1472,34 @@
 };
 MODULE_DEVICE_TABLE(ieee1394, dice_id_table);
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 11, 0)
+static int __dice_probe(struct device *dev)
+{
+	return dice_probe(fw_unit(dev), NULL);
+}
+
+static int __dice_remove(struct device *dev)
+{
+	dice_remove(fw_unit(dev));
+	return 0;
+}
+#endif
+
 static struct fw_driver dice_driver = {
 	.driver   = {
 		.owner	= THIS_MODULE,
 		.name	= KBUILD_MODNAME,
 		.bus	= &fw_bus_type,
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 11, 0)
+		.probe    = __dice_probe,
+		.remove   = __dice_remove,
+#endif
 	},
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 11, 0)
 	.probe    = dice_probe,
-	.update   = dice_bus_reset,
 	.remove   = dice_remove,
+#endif
+	.update   = dice_bus_reset,
 	.id_table = dice_id_table,
 };
 
